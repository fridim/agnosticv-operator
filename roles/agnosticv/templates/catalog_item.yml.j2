---
apiVersion: babylon.gpte.redhat.com/v1
kind: CatalogItem
metadata:
  namespace: {{ _namespace | to_json }}
  annotations:
    babylon.gpte.redhat.com/description: {{ _description | to_json }}
    babylon.gpte.redhat.com/displayName: {{ _catalog.display_name | default(_name) | to_json }}
    babylon.gpte.redhat.com/icon: {{ _catalog.icon | default('') | to_json }}
    babylon.gpte.redhat.com/keywords: {{ _catalog.keywords | default([]) | join(',') | to_json }}
{% set _labels = default_labels | combine(_catalog.labels | d({})) %}
{% if _labels | length > 0 %}
  labels:
{%   for _label_k, _label_v in default_labels.items() %}
    {{ _label_k }}: {{ _label_v | to_json }}
{%   endfor %}
{%   for _label_k, _label_v in (_catalog.labels | default({})).items() %}
    babylon.gpte.redhat.com/{{ _label_k }}: {{ _label_v | to_json }}
{%   endfor %}
{% endif %}
  name: {{ _name | to_json }}
  resourceVersion: "{{ current_resource_version }}"
spec:
  resources:
  - provider:
      apiVersion: poolboy.gpte.redhat.com/v1
      kind: ResourceProvider
      name: {{ _name | to_json }}
      namespace: {{ poolboy_namespace | to_json }}
