---
apiVersion: babylon.gpte.redhat.com/v1
kind: CatalogItem
metadata:
  namespace: {{ _namespace | to_json }}
  annotations:
    babylon.gpte.redhat.com/description: {{ _description | to_json }}
    babylon.gpte.redhat.com/displayName: {{ _catalog.display_name | default(_name) | to_json }}
    babylon.gpte.redhat.com/icon: {{ _catalog.icon | default('') | to_json }}
    babylon.gpte.redhat.com/keywords: {{ _catalog.keywords | default([]) | join(',') | to_json }}
{%   for _key, _value in (_catalog.message_templates | default({})).items() %}
    babylon.gpte.redhat.com/{{ _key | replace('_', '-') }}-message-template: {{ _value | to_json }}
{%   endfor %}
  labels:
    babylon.gpte.redhat.com/category: {{ _catalog.category | default(default_category) | to_json }}
{%   for _label_k, _label_v in default_labels.items() %}
    {{ _label_k }}: {{ _label_v | to_json }}
{%   endfor %}
{%   for _label_k, _label_v in (_catalog.labels | default({})).items() %}
    babylon.gpte.redhat.com/{{ _label_k }}: {{ _label_v | to_json }}
{%   endfor %}
  name: {{ _name | to_json }}
{% if current_resource_version | default('') != '' %}
  resourceVersion: "{{ current_resource_version }}"
{% endif %}
spec:
{% if _catalog.parameters is defined %}
  parameters: {{ _catalog.parameters | to_json }}
{% endif %}
  resources:
  - provider:
      apiVersion: poolboy.gpte.redhat.com/v1
      kind: ResourceProvider
      name: {{ _name | to_json }}
      namespace: {{ poolboy_namespace | to_json }}
